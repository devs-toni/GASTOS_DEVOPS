version: '3.8'

services:

  backend:
    container_name: GASTOS_API_SERVICE
    image: devstoni/gastos-api:0.11.0
    environment:
      - spring.profiles.active=prod
      - SERVER_PORT=$SERVER_PORT
      - DB_HOST=$DB_HOST
      - DB_USER=$DB_USER
      - DB_PASSWORD=$DB_PASSWORD
    ports:
      - $SERVER_HOST_PORT:$SERVER_PORT
    networks:
      - mysql_net
      - net

  frontend:
    container_name: GASTOS_FRONT_SERVICE
    image: devstoni/gastos-front:0.1.5
    ports:
      - $CLIENT_PORT:3001
    environment:
      - REACT_APP_NODE_ENV=$ENV
    stdin_open: true
    networks:
      - net

networks:
  net:
    external: false

  mysql_net:
    external: true
